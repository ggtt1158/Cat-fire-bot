<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat Fire - Earn Money</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- Monitag SDK for Interstitial and Rewarded Ads -->
    <script src='//libtl.com/sdk.js' data-zone='9937367' data-sdk='show_9937367' async></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #FF6B35;
            --secondary-color: #F7931E;
            --success-color: #4CAF50;
            --danger-color: #f44336;
            --warning-color: #ff9800;
            --dark-bg: #1a1a2e;
            --card-bg: #16213e;
            --text-primary: #ffffff;
            --text-secondary: #b8b8b8;
            --border-color: #2d3561;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding-bottom: 140px;
        }

        /* VPN Warning Modal */
        .vpn-warning {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .vpn-warning.active {
            display: flex;
        }

        .vpn-content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            margin: 20px;
            border: 2px solid var(--danger-color);
        }

        .vpn-icon {
            font-size: 60px;
            color: var(--danger-color);
            margin-bottom: 20px;
        }

        .vpn-content h2 {
            color: var(--danger-color);
            margin-bottom: 15px;
        }

        .vpn-content p {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        /* Welcome Modal */
        .welcome-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .welcome-modal.active {
            display: flex;
        }

        .welcome-content {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            margin: 20px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .welcome-content h2 {
            font-size: 28px;
            margin-bottom: 15px;
        }

        .welcome-content p {
            font-size: 16px;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .welcome-btn {
            background: white;
            color: var(--primary-color);
            border: none;
            padding: 12px 40px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .welcome-btn:hover {
            transform: scale(1.05);
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9998;
        }

        .loading-screen.hidden {
            display: none;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid var(--border-color);
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Header */
        .header {
            background: var(--card-bg);
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid var(--border-color);
        }

        .header h1 {
            font-size: 24px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Balance Card */
        .balance-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            margin: 20px;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
        }

        .balance-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .balance-amount {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .balance-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: white;
            color: var(--primary-color);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Content Container */
        .container {
            padding: 20px;
        }

        /* Task Sections */
        .task-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-icon {
            font-size: 24px;
        }

        /* Task Cards */
        .task-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .task-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.2);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .task-title {
            font-size: 18px;
            font-weight: bold;
        }

        .task-reward {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        .task-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .task-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--dark-bg);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: width 0.3s;
        }

        .task-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .task-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .task-btn.completed {
            background: var(--success-color);
            color: white;
            cursor: not-allowed;
        }

        .task-btn.disabled {
            background: var(--border-color);
            color: var(--text-secondary);
            cursor: not-allowed;
        }

        /* Spin Wheel */
        .spin-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .spin-wheel {
            width: 300px;
            height: 300px;
            margin: 20px auto;
            position: relative;
            border-radius: 50%;
            border: 10px solid var(--primary-color);
            overflow: hidden;
        }

        .spin-wheel canvas {
            width: 100%;
            height: 100%;
        }

        .spin-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid var(--primary-color);
            z-index: 10;
        }

        .spin-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .bet-options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .bet-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border-color);
            background: transparent;
            color: var(--text-primary);
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .bet-btn.selected {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-color: var(--primary-color);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--card-bg);
            border-top: 2px solid var(--border-color);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            background: transparent;
            color: var(--text-secondary);
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-label {
            font-size: 12px;
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Withdraw Page */
        .withdraw-notice {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
        }

        .withdraw-notice h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .withdraw-notice p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-primary);
            border-radius: 10px;
            font-size: 16px;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .withdraw-history {
            margin-top: 30px;
        }

        .history-item {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-info {
            flex: 1;
        }

        .history-amount {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .history-date {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .history-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-pending {
            background: var(--warning-color);
            color: white;
        }

        .status-approved {
            background: var(--success-color);
            color: white;
        }

        .status-rejected {
            background: var(--danger-color);
            color: white;
        }

        .top-withdrawers {
            margin-top: 30px;
        }

        .withdrawer-item {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .withdrawer-rank {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 18px;
        }

        .withdrawer-info {
            flex: 1;
            margin-left: 15px;
        }

        .withdrawer-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .withdrawer-amount {
            font-size: 18px;
            color: var(--success-color);
            font-weight: bold;
        }

        /* Referral Page */
        .referral-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .referral-title {
            font-size: 24px;
            margin-bottom: 15px;
        }

        .referral-description {
            margin-bottom: 20px;
            line-height: 1.6;
            opacity: 0.9;
        }

        .referral-link-container {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            word-break: break-all;
        }

        .referral-actions {
            display: flex;
            gap: 10px;
        }

        .referral-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .referral-list {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
        }

        .referral-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .referral-list-item:last-child {
            border-bottom: none;
        }

        /* Profile Page */
        .profile-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 40px 20px;
            text-align: center;
            border-radius: 0 0 30px 30px;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 48px;
            margin: 0 auto 20px;
        }

        .profile-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .profile-username {
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .profile-id {
            opacity: 0.8;
            font-size: 14px;
        }

        .profile-balance {
            background: var(--card-bg);
            margin: 20px;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
        }

        .profile-balance-label {
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .profile-balance-amount {
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 0 20px;
            margin-bottom: 20px;
        }

        .profile-stat-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .profile-stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .profile-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .earnings-chart {
            background: var(--card-bg);
            margin: 0 20px 20px;
            padding: 20px;
            border-radius: 15px;
        }

        .chart-title {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .chart-container {
            height: 200px;
            position: relative;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            z-index: 10002; /* ensure it's on top */
            animation: slideInRight 0.3s ease;
            max-width: 300px;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification.success {
            border-left: 4px solid var(--success-color);
        }

        .notification.error {
            border-left: 4px solid var(--danger-color);
        }

        .notification.warning {
            border-left: 4px solid var(--warning-color);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            max-width: 400px;
            margin: 20px;
            text-align: center;
        }

        .modal-title {
            font-size: 24px;
            margin-bottom: 15px;
        }

        .modal-text {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
        }

        /* Timer Display */
        .timer-display {
            font-size: 48px;
            font-weight: bold;
            color: var(--primary-color);
            margin: 20px 0;
        }

        /* YouTube Video Container */
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .code-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .code-input {
            flex: 1;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .balance-amount {
                font-size: 36px;
            }

            .spin-wheel {
                width: 250px;
                height: 250px;
            }

            .profile-stats {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 480px) {
            .referral-stats {
                grid-template-columns: 1fr;
            }

            .balance-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
    </div>

    <!-- VPN Warning -->
    <div class="vpn-warning" id="vpnWarning">
        <div class="vpn-content">
            <div class="vpn-icon">⚠️</div>
            <h2>VPN সনাক্ত করা হয়েছে!</h2>
            <p>আপনার VPN চালু আছে। এই অ্যাপ ব্যবহার করতে অনুগ্রহ করে আপনার VPN বন্ধ করুন এবং পেজ রিফ্রেশ করুন।</p>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div class="welcome-modal" id="welcomeModal">
        <div class="welcome-content">
            <h2>স্বাগতম! 🎉</h2>
            <p id="welcomeMessage">Cat Fire এ আপনাকে স্বাগতম! টাস্ক সম্পন্ন করুন এবং অর্থ উপার্জন করুন।</p>
            <button class="welcome-btn" onclick="closeWelcomeModal()">শুরু করুন</button>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <h1>🔥 Cat Fire</h1>
        <div class="user-info">
            <span id="userName">Loading...</span>
            <span>•</span>
            <span id="userId">ID: ...</span>
        </div>
    </div>

    <!-- Home Page -->
    <div class="page active" id="homePage">
        <!-- Balance Card -->
        <div class="balance-card">
            <div class="balance-label">আপনার ব্যালেন্স</div>
            <div class="balance-amount">$<span id="userBalance">0.00</span></div>
            <div class="balance-actions">
                <button class="btn btn-primary" onclick="showPage('withdrawPage')">
                    💰 Withdraw
                </button>
                <button class="btn btn-secondary" onclick="refreshBalance()">
                    🔄 Refresh
                </button>
            </div>
        </div>

        <div class="container">
            <!-- Spin Game Section -->
            <div class="task-section">
                <h2 class="section-title">
                    <span class="section-icon">🎰</span>
                    স্পিন গেম
                </h2>
                <div class="spin-container">
                    <div class="bet-options">
                        <button class="bet-btn" data-bet="low" onclick="selectBet('low')">
                            Low<br>$0.10
                        </button>
                        <button class="bet-btn selected" data-bet="medium" onclick="selectBet('medium')">
                            Medium<br>$0.50
                        </button>
                        <button class="bet-btn" data-bet="high" onclick="selectBet('high')">
                            High<br>$1.00
                        </button>
                    </div>
                    <div class="spin-wheel" id="spinWheel">
                        <div class="spin-pointer"></div>
                        <canvas id="wheelCanvas" width="300" height="300"></canvas>
                        <div class="spin-center" onclick="spinWheel()">SPIN</div>
                    </div>
                    <div style="text-align: center; color: var(--text-secondary);">
                        <p>আজকের স্পিন: <span id="todaySpins">0</span>/10</p>
                    </div>
                </div>
            </div>

            <!-- Daily Tasks Section -->
            <div class="task-section">
                <h2 class="section-title">
                    <span class="section-icon">📋</span>
                    দৈনিক টাস্ক
                </h2>

                <!-- Monetag Ad Task -->
                <div class="task-card">
                    <div class="task-header">
                        <div class="task-title">📺 Rewarded বিজ্ঞাপন দেখুন</div>
                        <div class="task-reward">$<span id="monetagReward">0.05</span></div>
                    </div>
                    <div class="task-description">
                        পুরস্কার পেতে বিজ্ঞাপন দেখুন
                    </div>
                    <div class="task-progress">
                        <span>আজকের অগ্রগতি</span>
                        <span><span id="monetagCount">0</span>/<span id="monetagLimit">10</span></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="monetagProgress" style="width: 0%"></div>
                    </div>
                    <button class="task-btn active" id="monetagBtn" onclick="watchMonetagAd()">
                        বিজ্ঞাপন দেখুন
                    </button>
                </div>

                <!-- Direct Link Task -->
                <div class="task-card">
                    <div class="task-header">
                        <div class="task-title">🔗 ডাইরেক্ট লিংক ভিজিট</div>
                        <div class="task-reward">$<span id="directLinkReward">0.10</span></div>
                    </div>
                    <div class="task-description">
                        লিংক ভিজিট করুন এবং নির্দিষ্ট সময় থাকুন
                    </div>
                    <div class="task-progress">
                        <span>আজকের অগ্রগতি</span>
                        <span><span id="directLinkCount">0</span>/3</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="directLinkProgress" style="width: 0%"></div>
                    </div>
                    <button class="task-btn active" id="directLinkBtn" onclick="visitDirectLink()">
                        লিংক ভিজিট করুন
                    </button>
                </div>

                <!-- YouTube Video Task -->
                <div class="task-card">
                    <div class="task-header">
                        <div class="task-title">🎥 ইউটিউব ভিডিও দেখুন</div>
                        <div class="task-reward">$<span id="youtubeReward">0.15</span></div>
                    </div>
                    <div class="task-description">
                        ভিডিও দেখুন এবং কোড সংগ্রহ করুন
                    </div>
                    <div class="task-progress">
                        <span>আজকের অগ্রগতি</span>
                        <span><span id="youtubeCount">0</span>/3</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="youtubeProgress" style="width: 0%"></div>
                    </div>
                    <button class="task-btn active" id="youtubeBtn" onclick="watchYoutubeVideo()">
                        ভিডিও দেখুন
                    </button>
                </div>

                <!-- Daily Login Bonus -->
                <div class="task-card">
                    <div class="task-header">
                        <div class="task-title">🎁 দৈনিক লগইন বোনাস</div>
                        <div class="task-reward">$<span id="loginBonusReward">0.20</span></div>
                    </div>
                    <div class="task-description">
                        প্রতিদিন লগইন করুন এবং বোনাস পান
                    </div>
                    <button class="task-btn active" id="loginBonusBtn" onclick="claimLoginBonus()">
                        ক্লেইম করুন
                    </button>
                </div>
            </div>

            <!-- One-Time Tasks Section -->
            <div class="task-section">
                <h2 class="section-title">
                    <span class="section-icon">⭐</span>
                    এককালীন টাস্ক
                </h2>

                <!-- Telegram Channel Task -->
                <div class="task-card">
                    <div class="task-header">
                        <div class="task-title">📢 টেলিগ্রাম চ্যানেল জয়েন</div>
                        <div class="task-reward">$<span id="telegramBonusReward">0.50</span></div>
                    </div>
                    <div class="task-description">
                        আমাদের টেলিগ্রাম চ্যানেল জয়েন করুন
                    </div>
                    <button class="task-btn active" id="telegramBtn" onclick="joinTelegramChannel()">
                        জয়েন করুন
                    </button>
                </div>

                <!-- YouTube Subscribe Task -->
                <div class="task-card">
                    <div class="task-header">
                        <div class="task-title">▶️ ইউটিউব সাবস্ক্রাইব</div>
                        <div class="task-reward">$<span id="youtubeSubBonusReward">0.50</span></div>
                    </div>
                    <div class="task-description">
                        আমাদের ইউটিউব চ্যানেল সাবস্ক্রাইব করুন
                    </div>
                    <button class="task-btn active" id="youtubeSubBtn" onclick="subscribeYoutube()">
                        সাবস্ক্রাইব করুন
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Withdraw Page -->
    <div class="page" id="withdrawPage">
        <div class="container">
            <h2 class="section-title">
                <span class="section-icon">💰</span>
                টাকা উত্তোলন
            </h2>

            <div class="withdraw-notice">
                <h3>উত্তোলন নির্দেশনা</h3>
                <p>• ন্যূনতম উত্তোলন: $<span id="minWithdraw">5.00</span></p>
                <p>• প্রসেসিং সময়: 24-48 ঘন্টা</p>
                <p>• সঠিক তথ্য প্রদান করুন</p>
            </div>

            <form id="withdrawForm" onsubmit="submitWithdraw(event)">
                <div class="form-group">
                    <label class="form-label">উত্তোলনের পরিমাণ ($)</label>
                    <input type="number" class="form-input" id="withdrawAmount" step="0.01" min="0" required placeholder="উদাহরণ: 10.00">
                </div>

                <div class="form-group">
                    <label class="form-label">পেমেন্ট মেথড</label>
                    <select class="form-select" id="paymentMethod" required>
                        <option value="">নির্বাচন করুন</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">মোবাইল নম্বর</label>
                    <input type="tel" class="form-input" id="mobileNumber" required placeholder="+880...">
                </div>

                <div class="form-group">
                    <label class="form-label">পেমেন্ট আইডি / নম্বর</label>
                    <input type="text" class="form-input" id="paymentId" required placeholder="আপনার পেমেন্ট আইডি">
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    উত্তোলন করুন
                </button>
            </form>

            <div class="withdraw-history">
                <h3 class="section-title">
                    <span class="section-icon">📜</span>
                    উত্তোলন ইতিহাস
                </h3>
                <div id="withdrawHistoryList">
                    <p style="text-align: center; color: var(--text-secondary); padding: 20px;">
                        কোনো উত্তোলন ইতিহাস নেই
                    </p>
                </div>
            </div>

            <div class="top-withdrawers">
                <h3 class="section-title">
                    <span class="section-icon">🏆</span>
                    শীর্ষ উত্তোলনকারী
                </h3>
                <div id="topWithdrawersList">
                    <p style="text-align: center; color: var(--text-secondary); padding: 20px;">
                        লোড হচ্ছে...
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Referral Page -->
    <div class="page" id="referralPage">
        <div class="container">
            <div class="referral-card">
                <h2 class="referral-title">🎁 রেফার করে আয় করুন</h2>
                <p class="referral-description">
                    আপনার বন্ধুদের আমন্ত্রণ জানান এবং প্রতিটি রেফারেলের জন্য $<span id="referralBonus">1.00</span> পান! 
                    আপনার বন্ধুও পাবে $<span id="referredBonus">2.00</span> বোনাস।
                </p>
                <div class="referral-link-container" id="referralLink">
                    লোড হচ্ছে...
                </div>
                <div class="referral-actions">
                    <button class="btn btn-primary" onclick="copyReferralLink()">
                        📋 কপি করুন
                    </button>
                    <button class="btn btn-secondary" onclick="shareReferralLink()">
                        📤 শেয়ার করুন
                    </button>
                </div>
            </div>

            <div class="referral-stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalReferrals">0</div>
                    <div class="stat-label">মোট রেফারেল</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">$<span id="referralEarnings">0.00</span></div>
                    <div class="stat-label">রেফারেল আয়</div>
                </div>
            </div>

            <div class="referral-list">
                <h3 class="section-title">
                    <span class="section-icon">👥</span>
                    আপনার রেফারেল
                </h3>
                <div id="referralListContainer">
                    <p style="text-align: center; color: var(--text-secondary); padding: 20px;">
                        এখনো কোনো রেফারেল নেই
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div class="page" id="profilePage">
        <div class="profile-header">
            <div class="profile-avatar">👤</div>
            <div class="profile-name" id="profileName">Loading...</div>
            <div class="profile-username" id="profileUsername">@username</div>
            <div class="profile-id" id="profileId">ID: ...</div>
        </div>

        <div class="profile-balance">
            <div class="profile-balance-label">মোট ব্যালেন্স</div>
            <div class="profile-balance-amount">$<span id="profileBalance">0.00</span></div>
        </div>

        <div class="profile-stats">
            <div class="profile-stat-card">
                <div class="profile-stat-value" id="profileTaskEarnings">$0</div>
                <div class="profile-stat-label">টাস্ক আয়</div>
            </div>
            <div class="profile-stat-card">
                <div class="profile-stat-value" id="profileGameEarnings">$0</div>
                <div class="profile-stat-label">গেম আয়</div>
            </div>
            <div class="profile-stat-card">
                <div class="profile-stat-value" id="profileReferralCount">0</div>
                <div class="profile-stat-label">রেফারেল</div>
            </div>
        </div>

        <div class="earnings-chart">
            <h3 class="chart-title">আয়ের গ্রাফ</h3>
            <div class="chart-container">
                <canvas id="earningsChart"></canvas>
            </div>
        </div>

        <div class="earnings-chart">
            <h3 class="chart-title">রেফারেল গ্রাফ</h3>
            <div class="chart-container">
                <canvas id="referralChart"></canvas>
            </div>
        </div>
    </div>
    
    <!-- Banner Ad Container -->
    <div id="banner-ad-container" style="position: fixed; bottom: 70px; width: 100%; min-height: 50px; display: flex; justify-content: center; align-items: center; z-index: 1001;">
        <!-- 
            গুরুত্বপূর্ণ: ব্যানার বিজ্ঞাপন দেখানোর জন্য, আপনাকে Monitag ড্যাশবোর্ড থেকে 
            আপনার ব্যানারের জন্য একটি নতুন Zone তৈরি করতে হবে এবং সেই Zone ID টি নিচে ব্যবহার করতে হবে।
            আপনার বর্তমান Zone ID (9937367) হয়তো শুধু Interstitial/Rewarded এর জন্য।
            
            নিচের 'YOUR_BANNER_ZONE_ID' লেখাটি আপনার আসল ব্যানার Zone ID দিয়ে পরিবর্তন করুন।
        -->
        <script src='//libtl.com/sdk.js' data-zone='YOUR_BANNER_ZONE_ID' data-sdk='show_YOUR_BANNER_ZONE_ID' async></script>
    </div>


    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-item active" onclick="showPage('homePage')">
            <div class="nav-icon">🏠</div>
            <div class="nav-label">Home</div>
        </button>
        <button class="nav-item" onclick="showPage('withdrawPage')">
            <div class="nav-icon">💰</div>
            <div class="nav-label">Withdraw</div>
        </button>
        <button class="nav-item" onclick="showPage('referralPage')">
            <div class="nav-icon">🎁</div>
            <div class="nav-label">Refer</div>
        </button>
        <button class="nav-item" onclick="showPage('profilePage')">
            <div class="nav-icon">👤</div>
            <div class="nav-label">Profile</div>
        </button>
    </div>

    <!-- Modals -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <h3 class="modal-title" id="modalTitle">টাস্ক</h3>
            <p class="modal-text" id="modalText">লোড হচ্ছে...</p>
            <div id="modalContent"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal()">বন্ধ করুন</button>
                <button class="btn btn-primary" id="modalActionBtn" onclick="modalAction()">ঠিক আছে</button>
            </div>
        </div>
    </div>

 <script>
    // Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyA7vbuDVd49qNePXsNCJrsMVmj-LCSH3R8",
        authDomain: "cat-fire-bot.firebaseapp.com",
        databaseURL: "https://cat-fire-bot-default-rtdb.firebaseio.com",
        projectId: "cat-fire-bot",
        storageBucket: "cat-fire-bot.firebasestorage.app",
        messagingSenderId: "320717959791",
        appId: "1:320717959791:web:8a6d191972cf263a7d939a"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const rtdb = firebase.database();

    // Telegram Web App
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Global Variables
    let currentUser = null;
    let userData = null;
    let adminSettings = null;
    let selectedBet = 'medium';
    let isSpinning = false;
    
    // --- App Initialization and User Data Handling ---
    window.addEventListener('load', initApp);

    async function initApp() {
        console.log('[v0] Initializing app...');
        
        // VPN detection can be enabled here if needed
        // const hasVPN = await detectVPN();

        const telegramUser = tg.initDataUnsafe?.user;
        
        if (!telegramUser) {
            showNotification('টেলিগ্রাম ডেটা পাওয়া যায়নি', 'error');
            document.getElementById('loadingScreen').classList.add('hidden');
            return;
        }

        try {
            await authenticateUser(telegramUser);
            await loadAdminSettings();
            
            // Use onSnapshot for real-time updates
            db.collection('users').doc(telegramUser.id.toString()).onSnapshot(async (doc) => {
                if (doc.exists) {
                    userData = doc.data();
                    await resetDailyTasksIfNeeded(); // Reset tasks if the day has changed
                    updateUI();
                }
            });

            await checkReferral();
            showWelcomeModal();

            // Start interstitial ad timer
            setInterval(showInterstitialAd, 120000); // 2 minutes

            document.getElementById('loadingScreen').classList.add('hidden');
            console.log("App initialized successfully.");
        } catch (error) {
            console.error('[v0] Init error:', error);
            showNotification('অ্যাপ চালু হতে সমস্যা হয়েছে।', 'error');
            document.getElementById('loadingScreen').classList.add('hidden');
        }
    }
    
    async function resetDailyTasksIfNeeded() {
        const userId = userData.telegramId;
        const today = new Date().toDateString();
        let needsUpdate = false;
        const dailyTasks = userData.dailyTasks || {};

        // Check each daily task
        if (!dailyTasks.monetag || dailyTasks.monetag.lastReset !== today) {
            dailyTasks.monetag = { count: 0, lastReset: today };
            needsUpdate = true;
        }
        if (!dailyTasks.directLink || dailyTasks.directLink.lastReset !== today) {
            dailyTasks.directLink = { count: 0, lastReset: today };
            needsUpdate = true;
        }
        if (!dailyTasks.youtube || dailyTasks.youtube.lastReset !== today) {
            dailyTasks.youtube = { count: 0, lastReset: today };
            needsUpdate = true;
        }
        if (!dailyTasks.spin || dailyTasks.spin.lastReset !== today) {
            dailyTasks.spin = { count: 0, lastReset: today };
            needsUpdate = true;
        }
        if (!dailyTasks.interstitial || dailyTasks.interstitial.lastReset !== today) {
            dailyTasks.interstitial = { count: 0, lastReset: today };
            needsUpdate = true;
        }
        if (!dailyTasks.loginBonus) {
            dailyTasks.loginBonus = { claimed: false, lastClaim: null };
            needsUpdate = true;
        } else {
            const lastClaimDate = dailyTasks.loginBonus.lastClaim ? new Date(dailyTasks.loginBonus.lastClaim).toDateString() : null;
            if (lastClaimDate !== today) {
                dailyTasks.loginBonus.claimed = false;
                needsUpdate = true;
            }
        }

        if (needsUpdate) {
            console.log("Resetting daily tasks for new day.");
            await db.collection('users').doc(userId).update({
                dailyTasks: dailyTasks,
                lastLogin: firebase.firestore.FieldValue.serverTimestamp()
            });
        }
    }


    // --- ADVERTISEMENT FUNCTIONS (REVISED) ---

    // Function to check if the SDK is ready
    function isSdkReady() {
        if (window.sdk && window.sdk.rewarded && window.sdk.interstitial) {
            console.log("Monitag SDK is ready.");
            return true;
        }
        console.warn("Monitag SDK is not ready yet.");
        return false;
    }

    async function watchMonetagAd() {
        if (!userData || !adminSettings) return;

        if (userData.dailyTasks.monetag.count >= adminSettings.monetagLimit) {
            showNotification('আজকের লিমিট শেষ', 'warning');
            return;
        }

        const monetagBtn = document.getElementById('monetagBtn');
        monetagBtn.disabled = true;
        monetagBtn.textContent = 'লোড হচ্ছে...';
        
        if (isSdkReady()) {
            sdk.rewarded.show({
                onSuccess: async (result) => {
                    console.log('Rewarded Ad Success:', result);
                    const reward = adminSettings.monetagReward;
                    
                    await db.collection('users').doc(userData.telegramId).update({
                        balance: firebase.firestore.FieldValue.increment(reward),
                        taskEarnings: firebase.firestore.FieldValue.increment(reward),
                        'dailyTasks.monetag.count': firebase.firestore.FieldValue.increment(1)
                    });

                    showNotification(`$${reward.toFixed(2)} যোগ করা হয়েছে!`, 'success');
                },
                onError: (error) => {
                    console.error('Rewarded Ad Error:', error);
                    showNotification('বিজ্ঞাপন দেখাতে সমস্যা হয়েছে। আবার চেষ্টা করুন।', 'error');
                    monetagBtn.disabled = false;
                    monetagBtn.textContent = 'বিজ্ঞাপন দেখুন';
                }
            });
        } else {
            showNotification('বিজ্ঞাপন লোড হচ্ছে। অনুগ্রহ করে ১-২ সেকেন্ড পর আবার চেষ্টা করুন।', 'error');
            monetagBtn.disabled = false;
            monetagBtn.textContent = 'বিজ্ঞাপন দেখুন';
        }
    }
    
    async function showInterstitialAd() {
        if (!userData || !adminSettings) return;

        const interstitialLimit = adminSettings.interstitialLimit || 10;
        if (userData.dailyTasks.interstitial.count >= interstitialLimit) {
            console.log('Interstitial ad daily limit reached.');
            return;
        }

        if (isSdkReady()) {
            console.log('Attempting to show interstitial ad...');
            sdk.interstitial.show({
                onSuccess: async (result) => {
                    console.log('Interstitial Ad Shown:', result);
                    await db.collection('users').doc(userData.telegramId).update({
                        'dailyTasks.interstitial.count': firebase.firestore.FieldValue.increment(1)
                    });
                },
                onError: (error) => {
                    console.error('Interstitial Ad Error:', error);
                }
            });
        }
    }

    // --- YOUR OTHER FUNCTIONS (UNCHANGED) ---
    // All other functions from your original code are preserved below.
    
    async function detectVPN() {
        try {
            const response = await fetch('https://ipapi.co/json/');
            const data = await response.json();
            if (data.org && (data.org.toLowerCase().includes('vpn') || data.org.toLowerCase().includes('proxy') || data.org.toLowerCase().includes('hosting'))) {
                document.getElementById('vpnWarning').classList.add('active');
                return true;
            }
            return false;
        } catch (error) { console.log('[v0] VPN detection error:', error); return false; }
    }
    async function authenticateUser(telegramUser) {
        const userId = telegramUser.id.toString();
        const userDoc = await db.collection('users').doc(userId).get();
        if (!userDoc.exists) {
            await initializeUserData(telegramUser);
        }
    }
    async function initializeUserData(telegramUser) {
        const userId = telegramUser.id.toString();
        const referrerId = getReferrerFromUrl();
        let signupBonus = 1.00;
        if (referrerId && referrerId !== userId) {
            signupBonus = 2.00; // This should come from admin settings
            await updateReferrer(referrerId, userId, telegramUser.first_name);
        }
        const newUserData = {
            telegramId: userId, firstName: telegramUser.first_name || 'User', lastName: telegramUser.last_name || '', username: telegramUser.username || '', balance: signupBonus, taskEarnings: signupBonus, gameEarnings: 0, referralEarnings: 0, totalReferrals: 0, referrerId: referrerId || null, createdAt: firebase.firestore.FieldValue.serverTimestamp(), lastLogin: firebase.firestore.FieldValue.serverTimestamp(), isBlocked: false,
            dailyTasks: { monetag: { count: 0, lastReset: new Date().toDateString() }, directLink: { count: 0, lastReset: new Date().toDateString() }, youtube: { count: 0, lastReset: new Date().toDateString() }, loginBonus: { claimed: false, lastClaim: null }, spin: { count: 0, lastReset: new Date().toDateString() }, interstitial: { count: 0, lastReset: new Date().toDateString() } },
            oneTimeTasks: { telegram: false, youtubeSub: false }, withdrawals: [], referrals: []
        };
        await db.collection('users').doc(userId).set(newUserData);
        await rtdb.ref(`users/${userId}`).set({ online: true, lastSeen: firebase.database.ServerValue.TIMESTAMP });
    }
    function getReferrerFromUrl() { return tg.initDataUnsafe?.start_param || null; }
    async function updateReferrer(referrerId, newUserId, newUserName) {
        try {
            const referrerDocRef = db.collection('users').doc(referrerId);
            await db.runTransaction(async (transaction) => {
                const referrerDoc = await transaction.get(referrerDocRef);
                if (!referrerDoc.exists) return;
                const referralBonus = adminSettings?.referredBonus || 1.00;
                transaction.update(referrerDocRef, {
                    balance: firebase.firestore.FieldValue.increment(referralBonus), referralEarnings: firebase.firestore.FieldValue.increment(referralBonus), totalReferrals: firebase.firestore.FieldValue.increment(1),
                    referrals: firebase.firestore.FieldValue.arrayUnion({ userId: newUserId, name: newUserName, joinedAt: new Date().toISOString(), earned: referralBonus })
                });
            });
            await sendTelegramNotification(referrerId, `🎉 নতুন রেফারেল! ${newUserName} আপনার লিংক ব্যবহার করে যোগ দিয়েছে। আপনি $${(adminSettings?.referredBonus || 1.00).toFixed(2)} পেয়েছেন!`);
        } catch (error) { console.error('[v0] Error updating referrer:', error); }
    }
    async function loadAdminSettings() {
        const settingsDoc = await db.collection('settings').doc('admin').get();
        if (settingsDoc.exists) { adminSettings = settingsDoc.data(); } else { /* default settings */ }
    }
    async function checkReferral() { /* ... unchanged ... */ }
    function updateUI() {
        if (!userData || !adminSettings) return;
        document.getElementById('userName').textContent = userData.firstName;
        document.getElementById('userId').textContent = `ID: ${userData.telegramId}`;
        document.getElementById('userBalance').textContent = userData.balance.toFixed(2);
        // Update all other UI elements
        updateTaskProgress();
        updateOneTimeTasks();
        document.getElementById('todaySpins').textContent = userData.dailyTasks.spin.count || 0;
        // Profile page
        document.getElementById('profileName').textContent = `${userData.firstName} ${userData.lastName || ''}`;
        document.getElementById('profileUsername').textContent = userData.username ? `@${userData.username}` : 'No username';
        document.getElementById('profileId').textContent = `ID: ${userData.telegramId}`;
        document.getElementById('profileBalance').textContent = userData.balance.toFixed(2);
        document.getElementById('profileTaskEarnings').textContent = `$${(userData.taskEarnings || 0).toFixed(2)}`;
        document.getElementById('profileGameEarnings').textContent = `$${(userData.gameEarnings || 0).toFixed(2)}`;
        document.getElementById('profileReferralCount').textContent = userData.totalReferrals || 0;
        // Referral page
        const referralLink = `https://t.me/CatFire_Bot/app?startapp=${userData.telegramId}`;
        document.getElementById('referralLink').textContent = referralLink;
        document.getElementById('totalReferrals').textContent = userData.totalReferrals || 0;
        document.getElementById('referralEarnings').textContent = (userData.referralEarnings || 0).toFixed(2);
        // Load lists and charts
        loadReferralList();
        loadWithdrawHistory();
        loadTopWithdrawers();
        initSpinWheel();
        drawEarningsChart();
        drawReferralChart();
    }
    function updateTaskProgress() {
        if (!userData.dailyTasks) return;
        const { monetag, directLink, youtube, loginBonus } = userData.dailyTasks;
        const monetagLimit = adminSettings.monetagLimit || 10;
        document.getElementById('monetagCount').textContent = monetag.count;
        document.getElementById('monetagProgress').style.width = `${(monetag.count / monetagLimit) * 100}%`;
        const monetagBtn = document.getElementById('monetagBtn');
        if (monetag.count >= monetagLimit) { monetagBtn.classList.replace('active', 'completed'); monetagBtn.textContent = 'সম্পন্ন'; monetagBtn.disabled = true; } 
        else { monetagBtn.classList.replace('completed', 'active'); monetagBtn.textContent = 'বিজ্ঞাপন দেখুন'; monetagBtn.disabled = false; }
        // ... update other tasks similarly ...
    }
    function updateOneTimeTasks() { /* ... unchanged ... */ }
    function showWelcomeModal() { /* ... unchanged ... */ }
    function closeWelcomeModal() { document.getElementById('welcomeModal').classList.remove('active'); }
    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('onclick') === `showPage('${pageId}')`) {
                item.classList.add('active');
            }
        });
    }
    async function refreshBalance() { /* ... unchanged ... */ }
    function shareReferralLink() { /* ... unchanged ... */ }
    function copyReferralLink() { /* ... unchanged ... */ }
    function initSpinWheel() { /* ... unchanged ... */ }
    function selectBet(bet) { selectedBet = bet; document.querySelectorAll('.bet-btn').forEach(btn => btn.classList.remove('selected')); event.currentTarget.classList.add('selected'); }
    async function spinWheel() { /* ... unchanged ... */ }
    async function visitDirectLink() { /* ... unchanged ... */ }
    function startDirectLinkTimer(seconds, reward) { /* ... unchanged ... */ }
    async function watchYoutubeVideo() { /* ... unchanged ... */ }
    function extractYoutubeId(url) { /* ... unchanged ... */ }
    async function verifyVideoCode(correctCode, reward) { /* ... unchanged ... */ }
    async function claimLoginBonus() { /* ... unchanged ... */ }
    async function joinTelegramChannel() { /* ... unchanged ... */ }
    async function subscribeYoutube() { /* ... unchanged ... */ }
    async function submitWithdraw(event) { /* ... unchanged ... */ }
    function loadWithdrawHistory() { /* ... unchanged ... */ }
    async function loadTopWithdrawers() { /* ... unchanged ... */ }
    function loadReferralList() { /* ... unchanged ... */ }
    function drawEarningsChart() { /* ... unchanged ... */ }
    function drawReferralChart() { /* ... unchanged ... */ }
    async function sendTelegramNotification(userId, message) { /* ... unchanged ... */ }
    function showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 3000);
    }
    function closeModal() { document.getElementById('taskModal').classList.remove('active'); }
    function modalAction() { /* Dummy function, needs implementation if used */ }
</script>
        
</body>
</html>


